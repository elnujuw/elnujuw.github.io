<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】 - Junle&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Junle&#039;s Blog"><meta name="msapplication-TileImage" content="/static/logos.jpeg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Junle&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="在第1章，安装Odoo开发环境中，我们研究了如何仅使用源附带的标准核心插件来设置Odoo实例。本章着重于向Odoo添加非核心或自定义插件。在Odoo中，您可以从多个目录加载加载项，此外，建议从单独的文件夹加载第三方加载项或自己的自定义加载项，以免与Odoo核心模块发生冲突。"><meta property="og:type" content="blog"><meta property="og:title" content="Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】"><meta property="og:url" content="https://www.junle.org/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%AE%A1%E7%90%86Odoo%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E4%BE%8B%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/"><meta property="og:site_name" content="Junle&#039;s Blog"><meta property="og:description" content="在第1章，安装Odoo开发环境中，我们研究了如何仅使用源附带的标准核心插件来设置Odoo实例。本章着重于向Odoo添加非核心或自定义插件。在Odoo中，您可以从多个目录加载加载项，此外，建议从单独的文件夹加载第三方加载项或自己的自定义加载项，以免与Odoo核心模块发生冲突。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.junle.org/images/List_of_Odoo_apps.png"><meta property="og:image" content="https://www.junle.org/images/Warning_for_external_library_dependency.png"><meta property="og:image" content="https://www.junle.org/images/Odoo_apps_list.png"><meta property="og:image" content="https://www.junle.org/images/Drop-down_link_for_upgrading_the_module.png"><meta property="og:image" content="https://www.junle.org/images/Application"><meta property="article:published_time" content="2021-03-27T02:15:21.000Z"><meta property="article:modified_time" content="2024-03-22T06:43:55.675Z"><meta property="article:author" content="Junle"><meta property="article:tag" content="Odoo开发者指南"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://www.junle.org/images/List_of_Odoo_apps.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.junle.org/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%AE%A1%E7%90%86Odoo%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E4%BE%8B%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/"},"headline":"Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】","image":["https://www.junle.org/images/List_of_Odoo_apps.png","https://www.junle.org/images/Warning_for_external_library_dependency.png","https://www.junle.org/images/Odoo_apps_list.png","https://www.junle.org/images/Drop-down_link_for_upgrading_the_module.png"],"datePublished":"2021-03-27T02:15:21.000Z","dateModified":"2024-03-22T06:43:55.675Z","author":{"@type":"Person","name":"Junle"},"publisher":{"@type":"Organization","name":"Junle's Blog","logo":{"@type":"ImageObject","url":"https://www.junle.org/static/logos.jpeg"}},"description":"在第1章，安装Odoo开发环境中，我们研究了如何仅使用源附带的标准核心插件来设置Odoo实例。本章着重于向Odoo添加非核心或自定义插件。在Odoo中，您可以从多个目录加载加载项，此外，建议从单独的文件夹加载第三方加载项或自己的自定义加载项，以免与Odoo核心模块发生冲突。"}</script><link rel="canonical" href="https://www.junle.org/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%AE%A1%E7%90%86Odoo%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E4%BE%8B%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/"><link rel="alternate" href="/atom.xml" title="Junle&#039;s Blog" type="application/atom+xml"><link rel="icon" href="/static/logos.jpeg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/monokai-sublime.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/static/logos.jpeg" alt="Junle&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-27T02:15:21.000Z" title="2021/3/27 10:15:21">2021-03-27</time>发表</span><span class="level-item"><time dateTime="2024-03-22T06:43:55.675Z" title="2024/3/22 14:43:55">2024-03-22</time>更新</span><span class="level-item">1 小时读完 (大约7664个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】</h1><div class="content"><p>在<a href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AE%89%E8%A3%85Odoo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/">第一章</a>，安装Odoo开发环境中，我们研究了如何仅使用源附带的标准核心插件来设置Odoo实例。本章着重于向Odoo添加非核心或自定义插件。在Odoo中，您可以从多个目录加载add-ons，此外，建议使用单独的文件夹加载第三方add-ons或自己的自定义add-ons，以免与Odoo核心模块发生冲突。</p>
<span id="more"></span>
<p>在本章中，我们将介绍以下Recipes：</p>
<ul>
<li><p>配置add-ons路径；</p>
</li>
<li><p>标准化您的实例目录布局；</p>
</li>
<li><p>安装和升级本地的add-ons；</p>
</li>
<li><p>从GitHub安装add-ons；</p>
</li>
<li><p>将更改应用到add-ons；</p>
</li>
<li><p>应用并尝试建议的拉取请求。</p>
<blockquote>
<p>有关术语</p>
<p>在本书中，我们将交替使用（插件）<strong>add-no</strong>或（模块）<strong>module</strong>或（应用）<strong>app</strong>或（插件模块）<strong>add-on module</strong>这些术语。这些属于都代表一个意思，就是可以从用户界面安装的Odoo应用程序或者Extension应用程序。</p>
</blockquote>
</li>
</ul>
<h2 id="配置add-ons路径"><a href="#配置add-ons路径" class="headerlink" title="配置add-ons路径"></a>配置add-ons路径</h2><p>借助<strong>addons_path</strong>参数，您可以将自己的附加模块加载到Odoo中。当Odoo初始化新数据库时，它将在<strong>addons_path</strong>配置参数提供的目录中搜索附加模块。</p>
<p><strong>addons_path</strong>中列出的目录应该包含子目录，每个子目录都是一个附加模块。在数据库初始化之后，您将能够安装这些目录中提供的模块。</p>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>此Recipes假定您已准备好一个实例，并且已生成一个配置文件，如第1章的安装Odoo开发环境中的在文件配方中存储实例配置中所述。请注意，Odoo的源码目录是<code>~/odoo-dev/odoo</code>，Odoo配置文件目录是<code>~/odoo-dev/myodoo.cfg</code>。</p>
<h3 id="如何配置add-no路径"><a href="#如何配置add-no路径" class="headerlink" title="如何配置add-no路径"></a>如何配置add-no路径</h3><p>要将<code>~/odoo-dev/loacl-addons</code>目录添加到实例的<strong>addons-path</strong>配置中，需要以下步骤：</p>
<ol>
<li><p>编辑你的实例的配置文件<code>~/odoo-dev/myodoo.cfg</code>;</p>
</li>
<li><p>找到以 <strong>addons_path&#x3D;</strong> 开头的行,默认情况下，它应如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addons_path = ~/odoo-dev/odoo/addons</span><br></pre></td></tr></table></figure>
</li>
<li><p>用逗号分隔，后跟要添加到addons_path的目录的名称，如以下代码所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addons_path = ~/odoo-dev/odoo/addons,~/odoo-dev/local-addons</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启你的实例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ~/odoo-dev/odoo/odoo-bin -c my-instance.cfg</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="运行原理"><a href="#运行原理" class="headerlink" title="运行原理"></a>运行原理</h3><p>当Odoo实例重启后，它会读取配置文件的<strong>addons_path</strong>变量并根据逗号分隔各个值。<strong>addons_path</strong>可以使用相对路径，但它们是相对于当前工作目录的，因此应避免在配置文件中使用。</p>
<p>至此，我们只添加了add-on目录<code> ~/odoo-dev/local-addons</code>但是该目录中还没有模块。甚至在该目录下添加了新的模块，也不会显示在Odoo的用户界面中。为此，您需要执行额外的操作，我们将在下一部分<em>更新插件模块列表</em>中会进行讲解。</p>
<blockquote>
<p>这背后的原因是，当初始化新数据库时，Odoo会自动在可用模块中列出您的自定义模块，但是如果在数据库初始化后添加新模块，则需要手动更新可用模块列表。</p>
</blockquote>
<h3 id="更多内容"><a href="#更多内容" class="headerlink" title="更多内容"></a>更多内容</h3><p>当你使用<code>odoo-bin</code>脚本来初始化新的数据库时，你可以在命令行输入<code>--addons-path</code>参数和以逗号分隔的插件目录。这样做Odoo会根据参数的内容来初始化插件目录。执行此操作时，必须显式包括基本加载项目录（odoo&#x2F;odoo&#x2F;addons）和核心加载项目录（odoo&#x2F;addons）。与前面的方法的一个小区别是本地附加组件不能为空；它们必须至少包含一个子目录，该子目录具有附加模块的最小结构。</p>
<p>在第三章，创建Odoo附加模块，我们会介绍如何创建自己的模块，这里顺便介绍一些如何创建一个满足Odoo需求的模块的快捷方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> -p ~/odoo-dev/local-addons/dummy</span><br><span class="line">$ <span class="built_in">touch</span> ~/odoo-dev/local-addons/dummy/ init .py</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;&#123;&quot;name&quot;: &quot;dummy&quot;, &quot;installable&quot;: False&#125;&#x27;</span> &gt; \</span><br><span class="line">~/odoo-dev/local-addons/dummy/ manifest .py</span><br></pre></td></tr></table></figure>

<p>您可以使用<code>--save</code>选项将路径保存到配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ odoo/odoo-bin -d mydatabase \</span><br><span class="line">--add-ons-path=<span class="string">&quot;odoo/odoo/addons,odoo/addons,~/odoo-dev/local-addons&quot;</span></span><br><span class="line">\</span><br><span class="line">--save -c ~/odoo-dev/my-instance.cfg --stop-after-init</span><br></pre></td></tr></table></figure>

<p>这里我们使用的是相对路径，保存时Odoo会自动转换为绝对路径存放到配置文件中。</p>
<h2 id="标准化您的实例目录布局"><a href="#标准化您的实例目录布局" class="headerlink" title="标准化您的实例目录布局"></a>标准化您的实例目录布局</h2><p>这个方法创建了一个结构化的目录，该目录将将相似生命周期或相似用途的文件分组放在特点的子目录中。</p>
<blockquote>
<p>这个方法仅在你想使用类似的文件夹结构来管理开发环境和生产环境时使用，如果你不想可以跳过。</p>
</blockquote>
<p>当然这个文件结构不是强制要求的，你可以根据你的需求更改此结构。</p>
<h3 id="如何标准化你的实例目录布局"><a href="#如何标准化你的实例目录布局" class="headerlink" title="如何标准化你的实例目录布局"></a>如何标准化你的实例目录布局</h3><p>要创建标准的实例布局，你需要执行以下步骤：</p>
<ol>
<li><p>为每个实例创建一个目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> ~/odoo-dev/projectname</span><br><span class="line">$ <span class="built_in">cd</span> ~/odoo-dev/projectname</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建Python虚拟环境：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 -m venv <span class="built_in">env</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建子目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> src <span class="built_in">local</span> bin filestore logs</span><br></pre></td></tr></table></figure>

<p>子目录功能如下：</p>
<ul>
<li><strong>src&#x2F;</strong>: 它包含Odoo本身的克隆，以及各种第三方附加项目。</li>
<li><strong>local&#x2F;</strong>: 这用于保存您的实例特定的插件。</li>
<li><strong>bin&#x2F;</strong>: 这包括各种帮助程序可执行的Shell脚本。</li>
<li><strong>filestore&#x2F;</strong>: 这用作文件存储。</li>
<li><strong>logs&#x2F; (可选)</strong>: 这用作服务日期存储。</li>
</ul>
</li>
<li><p>克隆Odoo源码和安装需求（详情可参考<a href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AE%89%E8%A3%85Odoo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/">第一章</a>，安装Odoo开发环境）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> -b 14.0 --single-branch --depth 1</span><br><span class="line">https://github.com/odoo/odoo.git src/odoo</span><br><span class="line">$ <span class="built_in">env</span>/bin/pip3 install -r src/odoo/requirements.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>保存以下代码到<strong>bin&#x2F;odoo</strong>：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh ROOT=$(dirname $0)/..</span></span><br><span class="line">PYTHON=<span class="variable">$ROOT</span>/env/bin/python3 ODOO=<span class="variable">$ROOT</span>/src/odoo/odoo-bin</span><br><span class="line"><span class="variable">$PYTHON</span> <span class="variable">$ODOO</span> -c <span class="variable">$ROOT</span>/projectname.cfg <span class="string">&quot;<span class="variable">$@</span>&quot;</span> <span class="built_in">exit</span> $?</span><br></pre></td></tr></table></figure>
</li>
<li><p>为<strong>bin&#x2F;odoo</strong>添加可执行权限：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">chmod</span> +x bin/odoo</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建一个空的名为dummy的本地模块：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> -p <span class="built_in">local</span>/dummy</span><br><span class="line">$ <span class="built_in">touch</span> <span class="built_in">local</span>/dummy/ init .py</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;&#123;&quot;name&quot;: &quot;dummy&quot;, &quot;installable&quot;: False&#125;&#x27;</span> &gt;\</span><br><span class="line"><span class="built_in">local</span>/dummy/ manifest .py</span><br></pre></td></tr></table></figure>
</li>
<li><p>为你的实例创建配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ bin/odoo --stop-after-init --save \</span><br><span class="line">--addons-path src/odoo/odoo/addons,src/odoo/addons,<span class="built_in">local</span> \</span><br><span class="line">--data-dir filestore</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加<strong>.gitignore</strong>文件，用于告诉GitHub排除给定目录，以便在提交代码时Git会忽略这些目录，例如: <strong>filestore&#x2F;</strong>, <strong>env&#x2F;</strong>, <strong>logs&#x2F;</strong> 和 <strong>src&#x2F;</strong> 。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dotfiles, with exceptions:</span></span><br><span class="line">.*</span><br><span class="line">!.gitignore</span><br><span class="line"><span class="comment"># python compiled files</span></span><br><span class="line">*.py[co]</span><br><span class="line"><span class="comment"># emacs backup files</span></span><br><span class="line">*~</span><br><span class="line"><span class="comment"># not tracked subdirectories</span></span><br><span class="line">/env/</span><br><span class="line">/src/</span><br><span class="line">/filestore/</span><br><span class="line">/logs/</span><br></pre></td></tr></table></figure>
</li>
<li><p>为你的实例创建一个Git仓库并添加文件到Git仓库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;initial version of projectname&quot;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="运行原理-1"><a href="#运行原理-1" class="headerlink" title="运行原理"></a>运行原理</h3><p>我们会生成一个干净的目录结构，其中包含明确标记的目录和专门的角色。我们使用不同的目录来存储以下内容：</p>
<ul>
<li>由其他人管理的代码（放在 <strong>src&#x2F;</strong> 目录下）；</li>
<li>本地相关的代码；</li>
<li>实例的文件存储。</li>
</ul>
<p>为每个项目都创建一个Python虚拟环境，我们可以确保项目的依赖关系不会干扰到其他不同版本的Odoo实例，这个Python虚拟环境只会占有少量的硬盘空间。</p>
<p>以类似的方式，通过为我们的不同项目使用Odoo和第三方加载项模块的单独克隆，我们能够使它们各自独立发展，并且仅在需要它们的实例上安装更新，从而降低了发生更新回退的风险。</p>
<p><strong>bin&#x2F;odoo</strong>脚本不仅使我们无需记住各种路径或激活Python虚拟环境即可运行服务器，也为我们设置了配置文件。您可以在其中添加其他脚本来帮助您进行日常工作。例如，您可以添加脚本来检查运行实例所需的其他第三方项目。</p>
<p>关于配置文件，我们仅展示了在此处设置的最小化的选项，您也可以设置更多的选项，例如数据库名称，数据库过滤器或项目侦听的端口。详情可参考<a href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AE%89%E8%A3%85Odoo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/">第一章</a>，安装Odoo开发环境，以获取有关此主题的更多信息。</p>
<p>最后，通过在Git仓库中管理所有这些内容，将设置复制到另一台计算机上并在团队之间共享开发变得非常容易。</p>
<blockquote>
<p>为了方便项目创建，您可以创建一个包含空结构的模板存储库，并为每个新项目fork该存储库。这将使您不必重新键入bin&#x2F;odoo脚本，.gitignore文件以及所需的任何其他模板文件（连续集成配置，README.md，ChangeLog等）。</p>
</blockquote>
<h3 id="更多内容-1"><a href="#更多内容-1" class="headerlink" title="更多内容"></a>更多内容</h3><p>复杂模块的开发需要各种配置选项，每当您尝试使用任何配置选项时，都会导致更新配置文件。 频繁更新配置文件可能会让人头疼，为避免这种情况，另一种方法是从命令行传递所有配置选项，如下所示：</p>
<ol>
<li><p>手动激活Python虚拟环境：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> <span class="built_in">env</span>/bin/activate</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入Odoo源码目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> src/odoo</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行Odoo服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./odoo-bin --addons-path=addons,../../local -d test-14 -i</span><br><span class="line">account,sale,purchase --log-level=debug</span><br></pre></td></tr></table></figure></li>
</ol>
<p>在第3步中，我们直接在命令行中输入了一些选项，第一个是<code>--add-ons-path</code>，它会加载Odoo的核心插件目录addons以及你的本地的插件目录，您将在其中放置自己的加载项模块。<code>-d</code>选项将使用<strong>test-14</strong>数据库或创建一个新数据库（如果数据库不存在）<code>-i</code>选项将安装<strong>account</strong>，<strong>sale</strong> 和 <strong>purchase</strong>模块。接下来，我们传递了日志级别的选项，并设置了日志级别为<strong>debug</strong>，以便在日志中显示更多信息。</p>
<p>通过使用命令行，您可以快速更改配置选项。您还可以在终端中查看实时日志。 有关所有可用选项，请参阅可参考<a href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AE%89%E8%A3%85Odoo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/">第一章</a>，安装Odoo开发环境，或使用<code>--help</code>命令查看所有选项的列表以及每个选项的描述。</p>
<h2 id="安装和升级本地附加模块"><a href="#安装和升级本地附加模块" class="headerlink" title="安装和升级本地附加模块"></a>安装和升级本地附加模块</h2><p>Odoo的核心功能来自其附加模块，您可以从Odoo本身中获得大量附加模块，以及可以从App Store下载或自己编写的附加模块。</p>
<p>在这个Recipe中，我们会介分别绍如何通过web界面和命令行的方式去安装和更新这些附加模块。</p>
<p>使用命令行执行这些操作的主要好处包括：一次可以操作多个插件，并在安装或更新的过程中可以清晰的查看服务日子，这在开发模式下或编写实例安装脚本时非常有用。</p>
<h3 id="准备工作-1"><a href="#准备工作-1" class="headerlink" title="准备工作"></a>准备工作</h3><p>确保您有一个正在运行的Odoo实例，其数据库已初始化并且正确设置了附加组件路径。在本教程中，我们将安装&#x2F;升级一些附加模块。</p>
<h3 id="如何安装和升级"><a href="#如何安装和升级" class="headerlink" title="如何安装和升级"></a>如何安装和升级</h3><p>有两种可能的方法来安装或更新加载项-您可以使用Web界面或命令行。</p>
<h4 id="使用Web界面安装和更新"><a href="#使用Web界面安装和更新" class="headerlink" title="使用Web界面安装和更新"></a>使用Web界面安装和更新</h4><p>使用Web界面安装新的附件模块，你需要进行以下操作：</p>
<ol>
<li><p>使用管理员账号登陆你的Odoo实例，进入<strong>应用</strong>菜单：</p>
<p><img src="/images/List_of_Odoo_apps.png" alt="List of Odoo apps"></p>
</li>
<li><p>搜索你要安装的附加模块，下面是一些提示帮助你完成这个步骤：</p>
<ul>
<li>激活<strong>未安装</strong>过滤器。</li>
<li>如果您正在寻找特定的功能附加组件，而不是广泛的功能附加组件，请删除<strong>应用程序</strong>过滤器。</li>
<li>在搜索栏输入模块的名称作为模块的过滤器。</li>
<li>您可能会发现使用列表视图使内容更具可读性。</li>
</ul>
</li>
<li><p>点击模块名下面的<strong>安装</strong>按钮。</p>
<blockquote>
<p>请注意，某些Odoo附加模块具有外部Python依赖关系。如果您的系统中未安装Python依赖关系，则Odoo将中止安装并显示以下对话框：</p>
</blockquote>
<p><img src="/images/Warning_for_external_library_dependency.png" alt="Warning for external library dependency"></p>
<p>通过安装相关的Python依赖来修复它。</p>
</li>
</ol>
<p>要更新数据库中的预安装模块，请执行以下步骤：</p>
<ol>
<li><p>使用管理员账号登陆你的Odoo实力，进入<strong>应用</strong>菜单；</p>
</li>
<li><p>点击<strong>应用</strong>：</p>
<p><img src="/images/Odoo_apps_list.png" alt="Odoo apps list"></p>
</li>
<li><p>搜索你要安装的附加模块，下面是一些提示帮助你完成这个步骤：</p>
<ul>
<li><p>激活<strong>已安装</strong>过滤器。</p>
</li>
<li><p>如果您正在寻找特定的功能附加组件，而不是广泛的功能附加组件，请删除<strong>应用程序</strong>过滤器。</p>
</li>
<li><p>在搜索栏输入模块的名称作为模块的过滤器。例如，这里我们输入CRM。</p>
</li>
<li><p>您可能会发现使用列表视图使内容更具可读性。</p>
</li>
</ul>
</li>
<li><p>点击应用卡片右上角的三点，在弹出的菜单中选择*<strong>更新</strong>。</p>
<p><img src="/images/Drop-down_link_for_upgrading_the_module.png" alt="Drop-down link for upgrading the module"></p>
</li>
</ol>
<p>激活开发者模式以查看模块的技术名称。如果您不知道如何激活开发人员模式，请参考<a href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AE%89%E8%A3%85Odoo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/">第一章</a>，安装Odoo开发环境：</p>
<p><img src="/images/Application's_technical_names.png" alt="Application&#39;s technical names"></p>
<p>激活开发者模式后，它将以红色显示该模块的技术名称。如果您使用的是Odoo Community Edition，则您会看到一些带有<strong>升级</strong>按钮的其他应用程序。这些应用程序是Odoo Enterprise Edition应用程序，如要安装&#x2F;使用它们您需要购买许可证。</p>
<h4 id="使用命令行安装和更新"><a href="#使用命令行安装和更新" class="headerlink" title="使用命令行安装和更新"></a>使用命令行安装和更新</h4><p>使用命令行界面安装新的附件模块，你需要进行以下操作：</p>
<ol>
<li><p>查找附件模块的名称。模块名称的定义是 <code>__manifest__.py</code>文件所在的目录名称，不带前导路径。</p>
</li>
<li><p>关闭Odoo实例，如果你是在生产环境中操作，请先进行数据库备份。</p>
</li>
<li><p>执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ odoo/odoo-bin -c instance.cfg -d dbname -i addon1,addon2 \</span><br><span class="line">--stop-after-init</span><br></pre></td></tr></table></figure>

<p>如果你在配置文件中设置了数据库名称，你可以忽略<code>-d</code>选项。</p>
</li>
<li><p>重启Odoo实例。</p>
</li>
</ol>
<p>要更新数据库中的预安装模块，请执行以下步骤：</p>
<ol>
<li><p>查找附件模块的名称。模块名称的定义是 <code>__manifest__.py</code>文件所在的目录名称，不带前导路径。</p>
</li>
<li><p>关闭Odoo实例，如果你是在生产环境中操作，请先进行数据库备份。</p>
</li>
<li><p>执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ odoo/odoo-bin -c instance.cfg -d dbname -u addon1 \</span><br><span class="line">--stop-after-init</span><br></pre></td></tr></table></figure>

<p>如果你在配置文件中设置了数据库名称，你可以忽略<code>-d</code>选项。</p>
</li>
<li><p>重启Odoo实例。</p>
</li>
</ol>
<h3 id="运行原理-2"><a href="#运行原理-2" class="headerlink" title="运行原理"></a>运行原理</h3><p>附加模块的安装和更新是两个紧密相关的过程，但是有一些重要的区别，如以下两节所强调。</p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>当您安装插件时，Odoo会检查其可用附件列表中是否有带有提供名称的未安装的插件，还会检查该插件的依赖项，如果有依赖项，它将以递归方式安装它们。</p>
<p>单个模块的安装过程包括以下步骤：</p>
<ol>
<li>如果有，运行插件的<strong>preinit</strong>挂钩。</li>
<li>从Python源代码加载模型定义，并在必要时更新数据库结构（有关详细信息，请参见第4章，应用程序模型）。</li>
<li>加载插件的数据文件，并在必要时更新数据库内容（有关详细信息，请参见第6章，管理模块数据）。</li>
<li>如果实例中已启用演示数据，安装附加演示数据。</li>
<li>如果有，运行插件的<strong>preinit</strong>挂钩。</li>
<li>对附加插件的视图定义进行验证。</li>
<li>如果启用了演示数据并启用了测试，运行附加组件的测试（有关详细信息，请参见第18章，自动测试用例）。</li>
<li>更新数据库中的模块状态。</li>
<li>从附加组件的翻译中更新数据库中的翻译（有关详细信息，请参见第11章，国际化）。</li>
</ol>
<blockquote>
<p>在<code>__manifest__.py</code>文件中分别使用<strong>pre_init_hook</strong>和<strong>post_init_hook</strong> key 定义了<strong>preinit</strong>和<strong>postinit</strong> hooks。 这些钩子用于在安装附加模块之前和之后调用Python函数。要了解有关init钩子的更多信息，请参阅第3章，创建Odoo附加模块。</p>
</blockquote>
<h4 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h4><p>更新插件时，Odoo会在可用插件模块列表中检查给定名称的已安装附件，还检查该附件的反向依赖关系（这些插件是取决于要更新的插件）。如果有的话，它也会递归地更新它们。</p>
<p>单个模块的更新过程包括以下步骤：</p>
<ol>
<li>运行附加模块的预迁移步骤（如果有）（有关详细信息，请参见第6章，管理模块数据）。</li>
<li>从Python源代码加载模型定义，并在必要时更新数据库结构（有关详细信息，请参见第4章，应用程序模型）。</li>
<li>加载插件的数据文件，并在必要时更新数据库的内容（有关详细信息，请参见第6章，管理模块数据）。</li>
<li>如果实例中启用了演示数据，则更新加载项的演示数据。</li>
<li>如果您的模块有任何迁移方法，请运行附加的迁移后步骤（有关详细信息，请参阅第6章，管理模块数据）。</li>
<li>对加载项的视图定义进行验证。</li>
<li>如果启用了演示数据并启用了测试，请运行附加组件的测试（有关详细信息，请参见第18章，自动测试用例）。</li>
<li>更新数据库中的模块状态。</li>
<li>从附加组件的翻译中更新数据库中的翻译（有关详细信息，请参见第11章，国际化）。</li>
</ol>
<blockquote>
<p>请注意，更新未安装的附加模块根本没有任何作用，但是，安装已安装的附加模块会重新安装该附加模块，这可能会对某些包含文件数据的数据文件产生意外影响应该由用户更新，而不是在常规模块更新过程中更新（请参阅第6章，管理模块数据中的使用noupdate和forcecreate标志配方）。这种情况一般发生在从命令行界面更新模块，Web界面更新不会发生这种错误的风险。</p>
</blockquote>
<h3 id="更多内容-2"><a href="#更多内容-2" class="headerlink" title="更多内容"></a>更多内容</h3><p>请谨慎处理依赖项。考虑一个情况您要在实例中安装<strong>sale</strong>，<strong>sale_stock</strong>和<strong>sale_specific</strong>模块，<strong>sale_specific</strong>依赖于<strong>sale_stock</strong>，<strong>sale_stock</strong>依赖于<strong>sale</strong>。要安装这三个组件，您只需要安装<strong>sale_specific</strong>，因为它将递归地安装<strong>sale_stock</strong>和<strong>sale</strong>依赖项。要更新所有三个，您需要更新<strong>sale</strong>，因为这将递归更新反向依赖关系<strong>sale_stock</strong>和<strong>sale_specific</strong>。</p>
<p>管理依赖项的另一个棘手的部分是，当您向已经安装了版本的加载项中添加依赖项时。让我们继续前面的示例来理解这一点，假设您在<strong>sale_specific</strong>中添加了对<strong>stock_dropshipping</strong>的依赖关系。更新<strong>sale_specific</strong>加载项不会自动安装新的依赖关系，也不会请求安装<strong>sale_specific</strong>。在这种情况下，您会收到非常讨厌的错误消息，因为未能成功加载插件的Python代码，但是数据库中存在加载项的数据和模型表。要解决此问题，您需要停止实例并手动安装新的依赖项。</p>
<h2 id="从GitHub安装插件模块"><a href="#从GitHub安装插件模块" class="headerlink" title="从GitHub安装插件模块"></a>从GitHub安装插件模块</h2><p>GitHub是第三方加载项的绝佳来源。许多Odoo合作伙伴使用GitHub在内部共享他们维护的插件，Odoo社区协会（OCA）在GitHub上集体维护了数百个插件。在开始编写自己的插件之前，请确保已检查是否存在可以直接使用的内容。</p>
<p>此教程将向您展示如何从GitHub克隆OCA的合作伙伴的项目，以及如何在您的实例中使用其中包含的附加模块。</p>
<h3 id="准备工作-2"><a href="#准备工作-2" class="headerlink" title="准备工作"></a>准备工作</h3><p>假设您要向客户（合作伙伴）表单添加新字段。通常情况下，Odoo客户模型没有性别字段，如果要添加性别字段，则需要创建一个新模块。幸运的是，邮件列表中的某人向您介绍了<strong>partner_contact_gender</strong>附加模块，该模块由OCA维护，作为 **partner-contact ** 联系项目的一部分。</p>
<p>此教程中使用的路径遵循了<em>标准化实例目录布局教程</em>中建议的布局。</p>
<h3 id="如何实现"><a href="#如何实现" class="headerlink" title="如何实现"></a>如何实现</h3><p>安装 <strong>partner_contact_gender</strong> 模块，你需要执行以下步骤：</p>
<ol>
<li><p>进入你的项目目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/odoo-dev/my-odoo/src</span><br></pre></td></tr></table></figure>
</li>
<li><p>克隆 <strong>partner-contact</strong> 项目的<strong>14.0</strong>分支代码到 <strong>src&#x2F;</strong> 目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --branch 14.0 \</span><br><span class="line">https://github.com/OCA/partner-contact.git src/partner-contact</span><br></pre></td></tr></table></figure>
</li>
<li><p>更改附件路径以包括该目录并更新实例的附件列表（请参阅本章中的配置附件路径配方和更新附件模块列表教程）。 instance.cfg的内容应如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">addons_path = ~/odoo-dev/my-odoo/src/odoo/odoo/addons, \</span><br><span class="line">~/odoo-dev/my-odoo/src/odoo/addons, \</span><br><span class="line">~/odoo-dev/my-odoo/src/, \</span><br><span class="line">~/odoo-dev/local-addons</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装<strong>partner_contact_gender</strong>附加插件（如果您不知道如何安装该模块，请查看上一教程<em>安装和升级本地附加模块</em>）。</p>
</li>
</ol>
<h3 id="运行原理-3"><a href="#运行原理-3" class="headerlink" title="运行原理"></a>运行原理</h3><p>所有Odoo社区协会代码存储库的插件模块都包含在单独的子目录中，这与Odoo对附件路径中的目录所期望的一致。因此，只需将存储库克隆到某个位置，然后将该位置添加到附加组件路径中就足够了。</p>
<h3 id="更多内容-3"><a href="#更多内容-3" class="headerlink" title="更多内容"></a>更多内容</h3><p>一些维护者采用不同的方法，每个存储库都有一个附加模块，位于存储库的根目录中。在这种情况下，您需要创建一个新目录，将其添加到加载项路径，并从该目录中所需的维护者中克隆所有加载项。请记住，每次添加新的存储库克隆时，都要更新插件模块列表。</p>
<h2 id="将更改应用到模块"><a href="#将更改应用到模块" class="headerlink" title="将更改应用到模块"></a>将更改应用到模块</h2><p>GitHub上可用的大多数附件都可能会发生更改，并且不遵循Odoo为其稳定版本强制执行的规则。他们可能会收到错误修复或增强功能，包括您提交的问题或功能请求，并且这些更改可能会在数据文件和视图中引入数据库架构更改或更新。本教程将介绍如何安装更新的版本。</p>
<h3 id="准备工作-3"><a href="#准备工作-3" class="headerlink" title="准备工作"></a>准备工作</h3><p>假设您报告了<strong>partner_contact_gender</strong>的一个问题，并且收到有关该问题已在<strong>partner-contact</strong>项目的14.0分支的最新版本中解决的通知。在这种情况下，你想更新你的实例到最新的版本。</p>
<h3 id="如何操作"><a href="#如何操作" class="headerlink" title="如何操作"></a>如何操作</h3><p>要将应用于来自GitHub的模块的源代码修改，您需要执行以下步骤：</p>
<ol>
<li><p>停止你的Odoo实例。</p>
</li>
<li><p>如果这是生产数据库，请先进行数据库备份（请参阅第1章，安装Odoo开发环境中的管理Odoo服务器数据库教程）。</p>
</li>
<li><p>进入<strong>partner-contact</strong>模块目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/odoo-dev/my-odoo/src/partner-contact</span><br></pre></td></tr></table></figure>
</li>
<li><p>为项目创建一个本地标签，以便万一发生问题可以恢复到该版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout 14.0</span><br><span class="line">$ git tag 14.0-before-update-$(<span class="built_in">date</span> --iso)</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取最新版本的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull --ff-only</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新数据库中的<strong>partner_address_street3</strong>模块（请参阅安装和升级本地加载项模块教程）。</p>
</li>
</ol>
<h3 id="运行原理-4"><a href="#运行原理-4" class="headerlink" title="运行原理"></a>运行原理</h3><p>通常，模块的开发人员有时会发布该加载项的最新版本。此更新通常包含错误修复和新功能。在这里，我们将获得该插件的新版本并在我们的实例中对其进行更新。</p>
<p>如果<code>git pull --ff-only</code>失败，则可以使用以下命令还原到以前的版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard 14.0-before-update-$(<span class="built_in">date</span> --iso)</span><br></pre></td></tr></table></figure>

<p>然后，您可以尝试<code>git pull</code>（不带<code>--ff-only</code>），这将导致合并，但这意味着您的模块本地代码被修改过。</p>
<h3 id="也可以看看"><a href="#也可以看看" class="headerlink" title="也可以看看"></a>也可以看看</h3><p>如果更新步骤中断，请参阅第1章，安装Odoo开发环境中的从源代码更新Odoo以获得恢复说明。请记住，始终先对生产环境的数据库副本进行更新测试。</p>
<h2 id="应用并尝试建议的Pull-Requests"><a href="#应用并尝试建议的Pull-Requests" class="headerlink" title="应用并尝试建议的Pull Requests"></a>应用并尝试建议的Pull Requests</h2><p>在Github的世界里，一个Pull Request(PR)是由开发者提出的请求，以便项目的维护者可以加入一些新的开发。例如一个PR可以修复Bug或者添加新的特性。这些请求在被合并到主分支之前都会进行审查和测试。</p>
<p>本节我们会介绍怎么应用一个PR到你的Odoo项目，以测试一个改进或修复一个错误。</p>
<h3 id="准备工作-4"><a href="#准备工作-4" class="headerlink" title="准备工作"></a>准备工作</h3><p>就像之前的教程一样，假设你报告了一个 <strong>Partner_address_street3</strong> 的问题，并且受到一个通知，说这个问题已经在PR中解决了，但是还没被合并到14.0分支中。</p>
<p>开发者要求你严重PR #123中的修复。你需要用这个分支更新一个测试实例。</p>
<p>你不应该直接在生产数据库上尝试这种分支，所以首先要创建一个测试环境和生产数据库副本（详情可参考<a href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AE%89%E8%A3%85Odoo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/">第一章</a>，安装Odoo开发环境）。</p>
<h3 id="如何实现-1"><a href="#如何实现-1" class="headerlink" title="如何实现"></a>如何实现</h3><p>要实现应用Github PR到模块上你需要进行以下步骤：</p>
<ol>
<li><p>停止实例。</p>
</li>
<li><p>进入模块所在目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/odoo-dev/my-odoo/src/partner-contact</span><br></pre></td></tr></table></figure>
</li>
<li><p>为项目创建一个本地tag，以便你出现问题可以恢复到当前版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout 14.0</span><br><span class="line">$ git tag 14.0-before-update-$(<span class="built_in">date</span> --iso)</span><br></pre></td></tr></table></figure>
</li>
<li><p>拉取请求分支，最简单的方法就是使用PR的编号，这个编号应该是由开发者告知你的，在本例子中我们的PR号为123：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origain pull/123/head</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启实例后更新 <strong>partner_contact_gender1</strong> 模块（如果你不知道怎么操作，可参考<em>安装和升级本地附件模块</em>小节）。</p>
</li>
<li><p>测试更新，尝试重现你的问题，或者尝试你想要的新功能。</p>
</li>
</ol>
<p>如果不能正常运行，可以到Github的PR页面进行评论，向开发者说明你做了什么和什么不能正常运行以便开发者更新PR。</p>
<p>如果能正常运行，也要评论PR页面，这是PR验证过程中必不可少的一部分，它将加快主分支的合并速度。</p>
<h3 id="运行原理-5"><a href="#运行原理-5" class="headerlink" title="运行原理"></a>运行原理</h3><p>我们使用的是GitHub的一个特性，可以使用 <strong>pull&#x2F;nnnn&#x2F;head</strong> 分支名按编号拉取PR，其中nnnn是PR的编号。Git pull命令会将远程分支合并到我们的分支中，应用我们代码库中的改动。在这之后，我们更新附加模块，测试它，并向作者汇报任何失败或成功的变化。</p>
<h3 id="更多内容-4"><a href="#更多内容-4" class="headerlink" title="更多内容"></a>更多内容</h3><p>如果你想同时测试不同的PR你可以重复上述教程的第4步。如果你对测试结果很满意，你可以创建一个分支来保留对应用的更改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b 14.0-custom</span><br></pre></td></tr></table></figure>

<p>使用不同的分支可以协助你记住你使用的不是Github的版本，而是你自定义的版本。</p>
<blockquote>
<p><code>git branch</code>命令可以用于列出你的本地仓库的所有分支。从此，如果你需要应用Githun 14.0的最新版本代码，你需要使用以下命令（不带–ff-only）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin 14.0</span><br></pre></td></tr></table></figure>

</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】</p><p><a href="https://www.junle.org/Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】/">https://www.junle.org/Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Junle</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-03-27</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-03-22</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Odoo%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97/">Odoo开发者指南</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/static/donate_wechat.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%88%9B%E5%BB%BAOdoo%E9%99%84%E5%8A%A0%E6%A8%A1%E5%9D%97%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Odoo14开发者指南第三章-创建Odoo附加模块【翻译】</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%AE%89%E8%A3%85Odoo%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/"><span class="level-item">Odoo14开发者指南第一章-安装Odoo开发环境【翻译】</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://www.junle.org/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%AE%A1%E7%90%86Odoo%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E4%BE%8B%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/';
            this.page.identifier = 'Odoo14开发者指南第二章-管理Odoo服务器实例【翻译】/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'junles-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/static/avatar.jpg" alt="Junle"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Junle</p><p class="is-size-6 is-block">elnujuw</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Guangdong (CN)</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">59</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">24</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/elnujuw" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/elnujuw"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="/static/email.png"><i class="fas fa-at"></i></a></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-25T03:24:10.000Z">2024-03-25</time></p><p class="title"><a href="/%E5%A6%82%E4%BD%95%E5%9C%A8RuoYi-Vue%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%95%B4%E5%90%88%E7%A7%AF%E6%9C%A8%E6%8A%A5%E8%A1%A8/">如何在RuoYi-Vue项目中整合积木报表</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-22T07:56:01.000Z">2024-03-22</time></p><p class="title"><a href="/RuoYi%E7%B3%BB%E7%BB%9F%E5%A6%82%E4%BD%95%E4%B8%8ESQLServer%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E7%BE%8E%E6%90%AD%E9%85%8D/">RuoYi系统如何与SQLServer数据库完美搭配</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-24T05:34:39.000Z">2023-07-24</time></p><p class="title"><a href="/%E6%8E%92%E6%9F%A5SQL-Server%E4%B8%AD%E8%BF%90%E8%A1%8C%E7%BC%93%E6%85%A2%E7%9A%84%E6%9F%A5%E8%AF%A2%E9%97%AE%E9%A2%98/">排查SQL Server中运行缓慢的查询问题</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-12-01T01:35:51.000Z">2022-12-01</time></p><p class="title"><a href="/Print-Spooler-%E6%9C%8D%E5%8A%A1%E6%84%8F%E5%A4%96%E7%BB%88%E6%AD%A2/">Print Spooler 服务意外终止</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-16T02:01:36.000Z">2022-06-16</time></p><p class="title"><a href="/Odoo14%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97%E7%AC%AC%E5%85%AD%E7%AB%A0-%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97%E6%95%B0%E6%8D%AE%E3%80%90%E7%BF%BB%E8%AF%91%E3%80%91/">Odoo14开发者指南第六章-管理模块数据【翻译】</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">三月 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">七月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">十二月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">十二月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">六月 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/11/"><span class="level-start"><span class="level-item">十一月 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/07/"><span class="level-start"><span class="level-item">七月 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/03/"><span class="level-start"><span class="level-item">三月 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/01/"><span class="level-start"><span class="level-item">一月 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2015/07/"><span class="level-start"><span class="level-item">七月 2015</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/11/"><span class="level-start"><span class="level-item">十一月 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/08/"><span class="level-start"><span class="level-item">八月 2014</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2014/06/"><span class="level-start"><span class="level-item">六月 2014</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Arduino/"><span class="tag">Arduino</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chart-js/"><span class="tag">Chart.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ERP5/"><span class="tag">ERP5</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ESP8266/"><span class="tag">ESP8266</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Metabase/"><span class="tag">Metabase</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odoo/"><span class="tag">Odoo</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odoo%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97/"><span class="tag">Odoo开发者指南</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenWRT/"><span class="tag">OpenWRT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PostgreSQL/"><span class="tag">PostgreSQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RaspberryPI/"><span class="tag">RaspberryPI</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RuoYi/"><span class="tag">RuoYi</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQLServer/"><span class="tag">SQLServer</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/STM32/"><span class="tag">STM32</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SlapOS/"><span class="tag">SlapOS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Superset/"><span class="tag">Superset</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zope/"><span class="tag">Zope</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/"><span class="tag">工具分享</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"><span class="tag">数据可视化</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tag">笔记</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/static/logos.jpeg" alt="Junle&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 Junle</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>